/**
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
**/(function(){var c=this.createjs=this.createjs||{},c=c.PreloadJS=c.PreloadJS||{};c.version="0.3.0";c.buildDate="Tue, 12 Feb 2013 21:12:02 GMT"})();this.createjs=this.createjs||{};
(function(){var c=function(){this.initialize()},a=c.prototype;c.initialize=function(d){d.addEventListener=a.addEventListener;d.removeEventListener=a.removeEventListener;d.removeAllEventListeners=a.removeAllEventListeners;d.hasEventListener=a.hasEventListener;d.dispatchEvent=a.dispatchEvent};a._listeners=null;a.initialize=function(){};a.addEventListener=function(a,b){var g=this._listeners;g?this.removeEventListener(a,b):g=this._listeners={};var f=g[a];f||(f=g[a]=[]);f.push(b);return b};a.removeEventListener=
function(a,b){var g=this._listeners;if(g){var f=g[a];if(f)for(var e=0,c=f.length;e<c;e++)if(f[e]==b){c==1?delete g[a]:f.splice(e,1);break}}};a.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null};a.dispatchEvent=function(a,b){var g=false,f=this._listeners;if(a&&f){typeof a=="string"&&(a={type:a});a.target=b||this;f=f[a.type];if(!f)return g;for(var f=f.slice(),e=0,c=f.length;e<c;e++){var h=f[e];h instanceof Function?g=g||h.apply(null,[a]):h.handleEvent&&
(g=g||h.handleEvent(a))}}return!!g};a.hasEventListener=function(a){var b=this._listeners;return!(!b||!b[a])};a.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=c})();this.createjs=this.createjs||{};
(function(){var c=function(){this.init()};c.prototype={};var a=c.prototype;c.FILE_PATTERN=/(\w+:\/{2})?((?:\w+\.){2}\w+)?(\/?[\S]+\/|\/)?([\w\-%\.]+)(?:\.)(\w+)?(\?\S+)?/i;a.loaded=false;a.canceled=false;a.progress=0;a._item=null;a.onProgress=null;a.onLoadStart=null;a.onComplete=null;a.onError=null;a.addEventListener=null;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a.getItem=function(){return this._item};
a.init=function(){};a.load=function(){};a.close=function(){};a._sendLoadStart=function(){this._isCanceled()||(this.onLoadStart&&this.onLoadStart({target:this}),this.dispatchEvent("loadStart"))};a._sendProgress=function(a){if(!this._isCanceled()){var b=null;if(typeof a=="number")this.progress=a,b={loaded:this.progress,total:1};else if(b=a,this.progress=a.loaded/a.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;b.target=this;b.type="progress";this.onProgress&&this.onProgress(b);
this.dispatchEvent(b)}};a._sendComplete=function(){this._isCanceled()||(this.onComplete&&this.onComplete({target:this}),this.dispatchEvent("complete"))};a._sendError=function(a){if(!this._isCanceled())a==null&&(a={}),a.target=this,a.type="error",this.onError&&this.onError(a),this.dispatchEvent(a)};a._isCanceled=function(){return window.createjs==null||this.canceled?true:false};a._parseURI=function(a){return!a?null:a.match(c.FILE_PATTERN)};a.toString=function(){return"[PreloadJS AbstractLoader]"};
createjs.AbstractLoader=c})();this.createjs=this.createjs||{};
(function(){var c=function(b){this.init(b)},a=c.prototype=new createjs.AbstractLoader;c.LOAD_TIMEOUT=8E3;c.BINARY="binary";c.CSS="css";c.IMAGE="image";c.JAVASCRIPT="javascript";c.JSON="json";c.SOUND="sound";c.SVG="svg";c.TEXT="text";c.XML="xml";a.useXHR=true;a.stopOnError=false;a.maintainScriptOrder=true;a.next=null;a.onFileLoad=null;a.onFileProgress=null;a._typeCallbacks=null;a._extensionCallbacks=null;a._loadStartWasDispatched=false;a._maxConnections=1;a._currentlyLoadingScript=null;a._currentLoads=
null;a._loadQueue=null;a._loadQueueBackup=null;a._loadItemsById=null;a._loadItemsBySrc=null;a._loadedResults=null;a._loadedRawResults=null;a._numItems=0;a._numItemsLoaded=0;a._scriptOrder=null;a._loadedScripts=null;a.init=function(b){this._numItems=this._numItemsLoaded=0;this._loadStartWasDispatched=this._paused=false;this._currentLoads=[];this._loadQueue=[];this._loadQueueBackup=[];this._scriptOrder=[];this._loadedScripts=[];this._loadItemsById={};this._loadItemsBySrc={};this._loadedResults={};this._loadedRawResults=
{};this._typeCallbacks={};this._extensionCallbacks={};this.setUseXHR(b)};a.setUseXHR=function(b){return this.useXHR=b!=false&&window.XMLHttpRequest!=null};a.removeAll=function(){this.remove()};a.remove=function(b){var a=null;b&&!(b instanceof Array)?a=[b]:b&&(a=b);b=false;if(a){for(;a.length;){for(var d=a.pop(),e=this.getResult(d),c=this._loadQueue.length-1;c>=0;c--)if(h=this._loadQueue[c].getItem(),h.id==d||h.src==d){this._loadQueue.splice(c,1)[0].cancel();break}for(c=this._loadQueueBackup.length-
1;c>=0;c--)if(h=this._loadQueueBackup[c].getItem(),h.id==d||h.src==d){this._loadQueueBackup.splice(c,1)[0].cancel();break}if(e)delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src],this._disposeItem(e);else for(var c=this._currentLoads.length-1;c>=0;c--){var h=this._currentLoads[c].getItem();if(h.id==d||h.src==d){this._currentLoads.splice(c,1)[0].cancel();b=true;break}}}b&&this._loadNext()}else{this.close();for(d in this._loadItemsById)this._disposeItem(this._loadItemsById[d]);this.initialize(this.useXHR)}};
a.reset=function(){this.close();for(var b in this._loadItemsById)this._disposeItem(this._loadItemsById[b]);b=[];for(i=0,l=this._loadQueueBackup.length;i<l;i++)b.push(this._loadQueueBackup[i].getItem());this.loadManifest(b,false)};c.isBinary=function(b){switch(b){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return true;default:return false}};a.installPlugin=function(b){if(!(b==null||b.getPreloadHandlers==null)){b=b.getPreloadHandlers();if(b.types!=null)for(var a=0,d=b.types.length;a<
d;a++)this._typeCallbacks[b.types[a]]=b.callback;if(b.extensions!=null)for(a=0,d=b.extensions.length;a<d;a++)this._extensionCallbacks[b.extensions[a]]=b.callback}};a.setMaxConnections=function(b){this._maxConnections=b;this._paused||this._loadNext()};a.loadFile=function(b,a){b==null?this._sendError({text:"PRELOAD_NO_FILE"}):(this._addItem(b),a!==false&&this.setPaused(false))};a.loadManifest=function(b,a){var d=null;if(b instanceof Array){if(b.length==0){this._sendError({text:"PRELOAD_MANIFEST_EMPTY"});
return}d=b}else{if(b==null){this._sendError({text:"PRELOAD_MANIFEST_NULL"});return}d=[b]}for(var c=0,o=d.length;c<o;c++)this._addItem(d[c]);a!==false&&this.setPaused(false)};a.load=function(){this.setPaused(false)};a.getItem=function(b){return this._loadItemsById[b]||this._loadItemsBySrc[b]};a.getResult=function(b,a){var d=this._loadItemsById[b]||this._loadItemsBySrc[b];if(d==null)return null;d=d.id;return a&&this._loadedRawResults[d]?this._loadedRawResults[d]:this._loadedResults[d]};a.setPaused=
function(b){(this._paused=b)||this._loadNext()};a.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0;this._loadedScripts.length=0;this.loadStartWasDispatched=false};a._addItem=function(b){b=this._createLoadItem(b);if(b!=null){var a=this._createLoader(b);a!=null&&(this._loadQueue.push(a),this._loadQueueBackup.push(a),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&b.type==createjs.LoadQueue.JAVASCRIPT&&a instanceof createjs.XHRLoader&&
(this._scriptOrder.push(b),this._loadedScripts.push(null)))}};a._createLoadItem=function(b){var a=null;switch(typeof b){case "string":a={src:b};break;case "object":a=window.HTMLAudioElement&&b instanceof HTMLAudioElement?{tag:b,src:a.tag.src,type:createjs.LoadQueue.SOUND}:b}b=this._parseURI(a.src);if(b!=null)a.ext=b[5];if(a.type==null)a.type=this._getTypeByExtension(a.ext);if(a.tag==null)a.tag=this._createTag(a.type);if(a.id==null||a.id=="")a.id=a.src;if(b=this._typeCallbacks[a.type]||this._extensionCallbacks[a.ext]){b=
b(a.src,a.type,a.id,a.data);if(b===false)return null;else if(b!==true){if(b.src!=null)a.src=b.src;if(b.id!=null)a.id=b.id;if(b.tag!=null&&b.tag.load instanceof Function)a.tag=b.tag;if(b.completeHandler!=null)a.completeHandler=b.completeHandler}if(b.type)a.type=b.type;b=this._parseURI(a.src);if(b!=null)a.ext=b[5]}this._loadItemsById[a.id]=a;return this._loadItemsBySrc[a.src]=a};a._createLoader=function(a){var d=this.useXHR;switch(a.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:d=
true;break;case createjs.LoadQueue.SOUND:d=false}return d?new createjs.XHRLoader(a):new createjs.TagLoader(a)};a._loadNext=function(){if(!this._paused){if(!this._loadStartWasDispatched)this._sendLoadStart(),this._loadStartWasDispatched=true;if(this._numItems==this._numItemsLoaded)this.loaded=true,this._sendComplete(),this.next&&this.next.load&&this.next.load();for(var a=0,d=this._loadQueue.length;a<d;a++){if(this._currentLoads.length>=this._maxConnections)break;var c=this._loadQueue[a];if(this.maintainScriptOrder&&
c instanceof createjs.TagLoader&&c.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=true}this._loadQueue.splice(a,1);this._loadItem(c);a--;d--}}};a._loadItem=function(a){a.addEventListener("progress",createjs.proxy(this._handleProgress,this));a.addEventListener("complete",createjs.proxy(this._handleFileComplete,this));a.addEventListener("error",createjs.proxy(this._handleFileError,this));this._currentLoads.push(a);a.load()};a._handleFileError=
function(a){var d=a.target;this._numItemsLoaded++;this._updateProgress();a={item:d.getItem()};this._sendError(a);this.stopOnError||(this._removeLoadItem(d),this._loadNext())};a._handleFileComplete=function(a){var a=a.target,d=a.getItem();this._loadedResults[d.id]=a.getResult();a instanceof createjs.XHRLoader&&(this._loadedRawResults[d.id]=a.getResult(true));this._removeLoadItem(a);if(this.maintainScriptOrder&&d.type==createjs.LoadQueue.JAVASCRIPT)if(a instanceof createjs.TagLoader)this._currentlyLoadingScript=
false;else{this._loadedScripts[this._scriptOrder.indexOf(d)]=d;this._checkScriptLoadOrder(a);return}this._processFinishedLoad(d)};a._processFinishedLoad=function(a){this._numItemsLoaded++;this._updateProgress();this._sendFileComplete(a);this._loadNext()};a._checkScriptLoadOrder=function(){for(var a=this._loadedScripts.length,d=0;d<a;d++){var c=this._loadedScripts[d];if(c===null)break;c!==true&&(this._processFinishedLoad(c),this._loadedScripts[d]=true,d--,a--)}};a._removeLoadItem=function(a){for(var d=
this._currentLoads.length,c=0;c<d;c++)if(this._currentLoads[c]==a){this._currentLoads.splice(c,1);break}};a._handleProgress=function(a){a=a.target;this._sendFileProgress(a.getItem(),a.progress);this._updateProgress()};a._updateProgress=function(){var a=this._numItemsLoaded/this._numItems,d=this._numItems-this._numItemsLoaded;if(d>0){for(var c=0,e=0,o=this._currentLoads.length;e<o;e++)c+=this._currentLoads[e].progress;a+=c/d*(d/this._numItems)}this._sendProgress(a)};a._disposeItem=function(a){delete this._loadedResults[a.id];
delete this._loadedRawResults[a.id];delete this._loadItemsById[a.id];delete this._loadItemsBySrc[a.src]};a._createTag=function(a){var d=null;switch(a){case createjs.LoadQueue.IMAGE:return document.createElement("img");case createjs.LoadQueue.SOUND:return d=document.createElement("audio"),d.autoplay=false,d;case createjs.LoadQueue.JAVASCRIPT:return d=document.createElement("script"),d.type="text/javascript",d;case createjs.LoadQueue.CSS:return d=this.useXHR?document.createElement("style"):document.createElement("link"),
d.rel="stylesheet",d.type="text/css",d;case createjs.LoadQueue.SVG:return this.useXHR?d=document.createElement("svg"):(d=document.createElement("object"),d.type="image/svg+xml"),d}return null};a._getTypeByExtension=function(a){switch(a){case "jpeg":case "jpg":case "gif":case "png":case "webp":case "bmp":return createjs.LoadQueue.IMAGE;case "ogg":case "mp3":case "wav":return createjs.LoadQueue.SOUND;case "json":return createjs.LoadQueue.JSON;case "xml":return createjs.LoadQueue.XML;case "css":return createjs.LoadQueue.CSS;
case "js":return createjs.LoadQueue.JAVASCRIPT;case "svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}};a._sendFileProgress=function(a,d){if(this._isCanceled())this._cleanUp();else{var c={target:this,type:"fileprogress",progress:d,loaded:d,total:1,item:a};this.onFileProgress&&this.onFileProgress(c);this.dispatchEvent(c)}};a._sendFileComplete=function(a){if(!this._isCanceled()){var d={target:this,type:"fileload",item:a,result:this._loadedResults[a.id],rawResult:this._loadedRawResults[a.id]};
a.completeHandler&&a.completeHandler(d);this.onFileLoad&&this.onFileLoad(d);this.dispatchEvent(d)}};a.toString=function(){return"[PreloadJS LoadQueue]"};createjs.proxy=function(a,d){return function(){return a.apply(d,arguments)}};createjs.LoadQueue=c;if(!createjs.proxy)createjs.proxy=function(a,d){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(d,Array.prototype.slice.call(arguments,0).concat(c))}};var d=function(){};d.init=function(){var a=navigator.userAgent;d.isFirefox=
a.indexOf("Firefox")>-1;d.isOpera=window.opera!=null;d.isChrome=a.indexOf("Chrome")>-1;d.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1};d.init();createjs.LoadQueue.BrowserDetect=d;if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){if(this==null)throw new TypeError;var d=Object(this),c=d.length>>>0;if(c===0)return-1;var e=0;arguments.length>1&&(e=Number(arguments[1]),e!=e?e=0:e!=0&&e!=Infinity&&e!=-Infinity&&(e=(e>0||-1)*Math.floor(Math.abs(e))));if(e>=c)return-1;
for(e=e>=0?e:Math.max(c-Math.abs(e),0);e<c;e++)if(e in d&&d[e]===a)return e;return-1}})();this.createjs=this.createjs||{};
(function(){var c=function(a){this.init(a)},a=c.prototype=new createjs.AbstractLoader;a._loadTimeout=null;a._tagCompleteProxy=null;a._isAudio=false;a._tag=null;a.init=function(a){this._item=a;this._tag=a.tag;this._isAudio=window.HTMLAudioElement&&a.tag instanceof HTMLAudioElement;this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)};a.getResult=function(){return this._tag};a.cancel=function(){this.canceled=true;this._clean();this.getItem()};a.load=function(){var a=this._item,b=this._tag;clearTimeout(this._loadTimeout);
this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT);if(this._isAudio)b.src=null,b.preload="auto";b.onerror=createjs.proxy(this._handleError,this);this._isAudio?(b.onstalled=createjs.proxy(this._handleStalled,this),b.addEventListener("canplaythrough",this._tagCompleteProxy,false)):(b.onload=createjs.proxy(this._handleLoad,this),b.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));switch(a.type){case createjs.LoadQueue.CSS:b.href=
a.src;break;case createjs.LoadQueue.SVG:b.data=a.src;break;default:b.src=a.src}if(a.type==createjs.LoadQueue.SVG||a.type==createjs.LoadQueue.JAVASCRIPT||a.type==createjs.LoadQueue.CSS)(document.body||document.getElementsByTagName("body")[0]).appendChild(b);b.load!=null&&b.load()};a._handleTimeout=function(){this._clean();this._sendError({reason:"PRELOAD_TIMEOUT"})};a._handleStalled=function(){};a._handleError=function(){this._clean();this._sendError()};a._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);
this.getItem().tag.readyState=="loaded"&&this._handleLoad()};a._handleLoad=function(){if(!this._isCanceled()){var a=this.getItem(),b=a.tag;if(!(this.loaded||this.isAudio&&b.readyState!==4))this.loaded=true,a.type==createjs.LoadQueue.SVG&&(document.body||document.getElementsByTagName("body")[0]).removeChild(b),this._clean(),this._sendComplete()}};a._clean=function(){clearTimeout(this._loadTimeout);var a=this.getItem().tag;a.onload=null;a.removeEventListener&&a.removeEventListener("canplaythrough",
this._tagCompleteProxy,false);a.onstalled=null;a.onprogress=null;a.onerror=null;a.parentNode&&a.parentNode.removeChild(a)};a.toString=function(){return"[PreloadJS TagLoader]"};createjs.TagLoader=c})();this.createjs=this.createjs||{};
(function(){var c=function(a){this.init(a)},a=c.prototype=new createjs.AbstractLoader;a._request=null;a._loadTimeout=null;a._xhrLevel=1;a._response=null;a._rawResponse=null;a.init=function(a){this._item=a;this._createXHR(a)};a.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response};a.cancel=function(){this.canceled=true;this._clean();this._request.abort()};a.load=function(){if(this._request==null)this._handleError();else{this._request.onloadstart=createjs.proxy(this._handleLoadStart,
this);this._request.onprogress=createjs.proxy(this._handleProgress,this);this._request.onabort=createjs.proxy(this._handleAbort,this);this._request.onerror=createjs.proxy(this._handleError,this);this._request.ontimeout=createjs.proxy(this._handleTimeout,this);if(this._xhrLevel==1)this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),createjs.LoadQueue.LOAD_TIMEOUT);this._request.onload=createjs.proxy(this._handleLoad,this);if(this._request.onreadystatechange)this._request.onreadystatechange=
this._handleReadyStateChange(this);try{this._request.send()}catch(a){this._sendError({source:a})}}};a._handleProgress=function(a){a.loaded>0&&a.total==0||this._sendProgress({loaded:a.loaded,total:a.total})};a._handleLoadStart=function(){clearTimeout(this._loadTimeout);this._sendLoadStart()};a._handleAbort=function(){this._clean();this._sendError()};a._handleError=function(){this._clean();this._sendError()};a._handleReadyStateChange=function(){this._request.readyState==4&&this._handleLoad()};a._handleLoad=
function(){if(!this.loaded)this.loaded=true,this._checkError()?(this._response=this._getResponse(),this._clean(),this._generateTag()&&this._sendComplete()):this._handleError()};a._handleTimeout=function(){this._clean();this._sendError({reason:"PRELOAD_TIMEOUT"})};a._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return false}return true};a._getResponse=function(){if(this._response!=null)return this._response;if(this._request.response!=null)return this._request.response;
try{if(this._request.responseText!=null)return this._request.responseText}catch(a){}try{if(this._request.responseXML!=null)return this._request.responseXML}catch(b){}return null};a._createXHR=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;b=b.hostname!=""&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);c=null;if(b&&window.XDomainRequest)c=new XDomainRequest;else if(window.XMLHttpRequest)c=new XMLHttpRequest;else try{c=
new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(f){try{c=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(o){return false}}}a.type==createjs.LoadQueue.TEXT&&c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined");this._xhrLevel=typeof c.responseType==="string"?2:1;c.open("GET",a.src,true);b&&c instanceof XMLHttpRequest&&this._xhrLevel==1&&c.setRequestHeader("Origin",location.origin);if(createjs.LoadQueue.isBinary(a.type))c.responseType=
"arraybuffer";this._request=c;return true};a._clean=function(){clearTimeout(this._loadTimeout);var a=this._request;a.onloadstart=null;a.onprogress=null;a.onabort=null;a.onerror=null;a.onload=null;a.ontimeout=null;a.onloadend=null;a.onreadystatechange=null};a._generateTag=function(){var a=this._item.tag;switch(this._item.type){case createjs.LoadQueue.IMAGE:return a.onload=createjs.proxy(this._handleTagReady,this),a.src=this._item.src,this._rawResponse=this._response,this._response=a,false;case createjs.LoadQueue.JAVASCRIPT:a=
document.createElement("script");this._rawResponse=a.text=this._response;this._response=a;break;case createjs.LoadQueue.CSS:document.getElementsByTagName("head")[0].appendChild(a);if(a.styleSheet)a.styleSheet.cssText=this._response;else{var b=document.createTextNode(this._response);a.appendChild(b)}this._rawResponse=this._response;this._response=a;break;case createjs.LoadQueue.XML:this._response=b=this._parseXML(this._response,"text/xml");break;case createjs.LoadQueue.SVG:b=this._parseXML(this._response,
"image/svg+xml");this._rawResponse=this._response;a.appendChild(b.documentElement);this._response=a;break;case createjs.LoadQueue.JSON:a={};try{a=JSON.parse(this._response)}catch(c){a=null}this._rawResponse=this._response;this._response=a}return true};a._parseXML=function(a,b){var c=null;window.DOMParser?c=(new DOMParser).parseFromString(a,b):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async=false,c.loadXML(a));return c};a._handleTagReady=function(){this._sendComplete()};a.toString=function(){return"[PreloadJS XHRLoader]"};
createjs.XHRLoader=c})();typeof JSON!=="object"&&(JSON={});
(function(){function c(a){return a<10?"0"+a:a}function a(a){g.lastIndex=0;return g.test(a)?'"'+a.replace(g,function(a){var b=o[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(b,c){var g,n,m,p,q=f,k,j=c[b];j&&typeof j==="object"&&typeof j.toJSON==="function"&&(j=j.toJSON(b));typeof h==="function"&&(j=h.call(c,b,j));switch(typeof j){case "string":return a(j);case "number":return isFinite(j)?String(j):"null";case "boolean":case "null":return String(j);
case "object":if(!j)return"null";f+=e;k=[];if(Object.prototype.toString.apply(j)==="[object Array]"){p=j.length;for(g=0;g<p;g+=1)k[g]=d(g,j)||"null";m=k.length===0?"[]":f?"[\n"+f+k.join(",\n"+f)+"\n"+q+"]":"["+k.join(",")+"]";f=q;return m}if(h&&typeof h==="object"){p=h.length;for(g=0;g<p;g+=1)typeof h[g]==="string"&&(n=h[g],(m=d(n,j))&&k.push(a(n)+(f?": ":":")+m))}else for(n in j)Object.prototype.hasOwnProperty.call(j,n)&&(m=d(n,j))&&k.push(a(n)+(f?": ":":")+m);m=k.length===0?"{}":f?"{\n"+f+k.join(",\n"+
f)+"\n"+q+"}":"{"+k.join(",")+"}";f=q;return m}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,e,o={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,c){var g;e=f="";if(typeof c==="number")for(g=0;g<c;g+=1)e+=" ";else typeof c==="string"&&(e=c);if((h=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return d("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,c){function d(a,b){var e,g,f=a[b];if(f&&typeof f==="object")for(e in f)Object.prototype.hasOwnProperty.call(f,e)&&(g=d(f,e),g!==void 0?f[e]=g:delete f[e]);return c.call(a,b,f)}var e,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof c==="function"?d({"":e},""):e;throw new SyntaxError("JSON.parse");}})();

/*!
 *  howler.js v1.1.11
 *  howlerjs.com
 *
 *  (c) 2013, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e={},t=null,n=!0,r=!1;if("undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:"undefined"!=typeof Audio?n=!1:(n=!1,r=!0),n){var i=void 0===t.createGain?t.createGainNode():t.createGain();i.gain.value=1,i.connect(t.destination)}var s=function(){this._volume=1,this._muted=!1,this.usingWebAudio=n,this._howls=[]};s.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e&&e>=0&&1>=e){t._volume=e,n&&(i.gain.value=e);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var s=0;s<t._howls[r]._audioNode.length;s++)t._howls[r]._audioNode[s].volume=t._howls[r]._volume*t._volume;return t}return n?i.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,n&&(i.gain.value=e?0:t._volume);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var s=0;s<t._howls[r]._audioNode.length;s++)t._howls[r]._audioNode[s].muted=e}};var o=new s,u=null;if(!r){u=new Audio;var a={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),webm:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var f=function(e){var t=this;t._autoplay=e.autoplay||!1,t._buffer=e.buffer||!1,t._duration=e.duration||0,t._format=e.format||null,t._loop=e.loop||!1,t._loaded=!1,t._sprite=e.sprite||{},t._src=e.src||"",t._pos3d=e.pos3d||[0,0,-.5],t._volume=e.volume||1,t._urls=e.urls||[],t._onload=[e.onload||function(){}],t._onloaderror=[e.onloaderror||function(){}],t._onend=[e.onend||function(){}],t._onpause=[e.onpause||function(){}],t._onplay=[e.onplay||function(){}],t._onendTimer=[],t._webAudio=n&&!t._buffer,t._audioNode=[],t._webAudio&&t._setupAudioNode(),o._howls.push(t),t.load()};if(f.prototype={load:function(){var t=this,n=null;if(r)return t.on("loaderror"),void 0;for(var i={mp3:a.mp3,opus:a.opus,ogg:a.ogg,wav:a.wav,m4a:a.m4a,weba:a.webm},s=0;s<t._urls.length;s++){var u;if(t._format?u=t._format:(u=t._urls[s].toLowerCase().match(/.+\.([^?]+)(\?|$)/),u=u&&u.length>=2?u[1]:t._urls[s].toLowerCase().match(/data\:audio\/([^?]+);/)[1]),i[u]){n=t._urls[s];break}}if(!n)return t.on("loaderror"),void 0;if(t._src=n,t._webAudio)l(t,n);else{var f=new Audio;t._audioNode.push(f),f.src=n,f._pos=0,f.preload="auto",f.volume=o._muted?0:t._volume*o.volume(),e[n]=t;var c=function(){t._duration=f.duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),f.removeEventListener("canplaythrough",c,!1)};f.addEventListener("canplaythrough",c,!1),f.load()}return t},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var r=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode(function(i){i._sprite=e;var s,u=i._pos>0?i._pos:r._sprite[e][0]/1e3,a=r._sprite[e][1]/1e3-i._pos,f=!(!r._loop&&!r._sprite[e][2]),l="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:l,sprite:e,loop:f};s=setTimeout(function(){!r._webAudio&&f&&r.stop(t.id,t.timer).play(e,t.id),r._webAudio&&!f&&(r._nodeById(t.id).paused=!0),r._webAudio||f||r.stop(t.id,t.timer),r.on("end",l)},1e3*a),r._onendTimer.push(s),t.timer=r._onendTimer[r._onendTimer.length-1]}(),r._webAudio){var c=r._sprite[e][0]/1e3,p=r._sprite[e][1]/1e3;i.id=l,i.paused=!1,h(r,[f,c,p],l),r._playStart=t.currentTime,i.gain.value=r._volume,void 0===i.bufferSource.start?i.bufferSource.noteGrainOn(0,u,a):i.bufferSource.start(0,u,a)}else{if(4!==i.readyState)return r._clearEndTimer(s),function(){var t=r,s=e,o=n,u=i,a=function(){t.play(s,o),u.removeEventListener("canplaythrough",a,!1)};u.addEventListener("canplaythrough",a,!1)}(),r;i.id=l,i.currentTime=u,i.muted=o._muted,i.volume=r._volume*o.volume(),setTimeout(function(){i.play()},0)}return r.on("play"),"function"==typeof n&&n(l),r}),r):("function"==typeof n&&n(),r):(r.on("load",function(){r.play(e,n)}),r)},pause:function(e,t){var n=this;if(!n._loaded)return n.on("play",function(){n.pause(e)}),n;n._clearEndTimer(t||0);var r=e?n._nodeById(e):n._activeNode();if(r)if(r._pos=n.pos(null,e),n._webAudio){if(!r.bufferSource)return n;r.paused=!0,void 0===r.bufferSource.stop?r.bufferSource.noteOff(0):r.bufferSource.stop(0)}else r.pause();return n.on("pause"),n},stop:function(e,t){var n=this;if(!n._loaded)return n.on("play",function(){n.stop(e)}),n;n._clearEndTimer(t||0);var r=e?n._nodeById(e):n._activeNode();if(r)if(r._pos=0,n._webAudio){if(!r.bufferSource)return n;r.paused=!0,void 0===r.bufferSource.stop?r.bufferSource.noteOff(0):r.bufferSource.stop(0)}else r.pause(),r.currentTime=0;return n},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.volume=0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.volume=t._volume),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var r=t?n._nodeById(t):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*o.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),"number"==typeof e?r:r._pos||0;e=parseFloat(e);var i=n?r._nodeById(n):r._activeNode();if(i)return r._webAudio?e>=0?(i._pos=e,r.pause(n).play(i._sprite,n),r):i._pos+(t.currentTime-r._playStart):e>=0?(i.currentTime=e,r):i.currentTime;if(e>=0)return r;for(var s=0;s<r._audioNode.length;s++)if(r._audioNode[s].paused&&4===r._audioNode[s].readyState)return r._webAudio?r._audioNode[s]._pos:r._audioNode[s].currentTime},pos3d:function(e,t,n,r){var i=this;if(t=void 0!==t&&t?t:0,n=void 0!==n&&n?n:-.5,!i._loaded)return i.on("play",function(){i.pos3d(e,t,n,r)}),i;if(!(e>=0||0>e))return i._pos3d;if(i._webAudio){var s=r?i._nodeById(r):i._activeNode();s&&(i._pos3d=[e,t,n],s.panner.setPosition(e,t,n))}return i},fade:function(e,t,n,r,i){var s=this,o=Math.abs(e-t),u=e>t?"down":"up",a=o/.01,f=n/a;if(!s._loaded)return s.on("load",function(){s.fade(e,t,n,r,i)}),s;s.volume(e,i);for(var l=1;a>=l;l++)!function(){var e=s._volume+("up"===u?.01:-.01)*l,n=Math.round(1e3*e)/1e3,o=t;setTimeout(function(){s.volume(n,i),n===o&&r&&r()},f*l)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var i=this;return i.fade(i._volume,e,t,function(){n&&n(),i.pause(r),i.on("end")},r)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&4===t._audioNode[r].readyState){e(t._audioNode[r]),n=!0;break}if(t._drainPool(),!n){var i;t._webAudio?(i=t._setupAudioNode(),e(i)):(t.load(),i=t._audioNode[t._audioNode.length-1],i.addEventListener("loadedmetadata",function(){e(i)}))}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){var t=this,n=t._onendTimer.indexOf(e);n=n>=0?n:0,t._onendTimer[n]&&(clearTimeout(t._onendTimer[n]),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]=void 0===t.createGain?t.createGainNode():t.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(i),n[r].panner=t.createPanner(),n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,t){var n=this,r=n["_on"+e];if("function"==typeof t)r.push(t);else for(var i=0;i<r.length;i++)t?r[i].call(n,t):r[i].call(n);return n},off:function(e,t){for(var n=this,r=n["_on"+e],i=""+t,s=0;s<r.length;s++)if(i===""+r[s]){r.splice(s,1);break}return n},unload:function(){for(var t=this,n=t._audioNode,r=0;r<t._audioNode.length;r++)t.stop(n[r].id),t._webAudio?n[r].disconnect(0):n[r].src="";var i=o._howls.indexOf(t);i&&o._howls.splice(i,1),delete e[t._src],t=null}},n)var l=function(n,r){if(r in e)n._duration=e[r].duration,c(n);else{var i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){t.decodeAudioData(i.response,function(t){t&&(e[r]=t,c(n,t))})},i.onerror=function(){n._webAudio&&(n._buffer=!0,n._webAudio=!1,n._audioNode=[],delete n._gainNode,n.load())};try{i.send()}catch(s){i.onerror()}}},c=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},h=function(n,r,i){var s=n._nodeById(i);s.bufferSource=t.createBufferSource(),s.bufferSource.buffer=e[n._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=r[0],r[0]&&(s.bufferSource.loopStart=r[1],s.bufferSource.loopEnd=r[1]+r[2])};"function"==typeof define&&define.amd?define("Howler",function(){return{Howler:o,Howl:f}}):(window.Howler=o,window.Howl=f)}()
/**
* Superstars - Superblink preloaderanimasjon
* (c) 2013 Agens AS
**/
SUPERSTARS=function(){function a(a,b,d){k=b||"red",l=d||"rgba(0,0,0,0.3)",f=document.getElementById(a),g=f.getContext("2d"),i=.5*f.width,j=.5*f.height,h=setInterval(c,30)}function b(){clearInterval(h)}function c(){m++,g.clearRect(0,0,f.width,f.height),g.fillStyle=k,g.beginPath(),g.rect(0,0,f.width,f.height),g.fill();var a=25,b=5,c=d(m,0,1,a);m>a&&(c=1-.1*(m-a)),c=Math.max(0,c);var h=d(m-b,0,1,a);m>a+b&&(h=1-.1*(m-a-b)),h=Math.max(0,h);var l=d(m-2*b,0,1,a);m>a+2*b&&(l=1-.1*(m-a-2*b)),l=Math.max(0,l),e(i-80,j,c),e(i,j,h),e(i+80,j,l),m>a+3*b&&(m=0)}function d(a,b,c,d){var e=(a/=d)*a,f=e*a;return b+c*(72.8925*f*e+-218.58*e*e+238.88*f+-113.59*e+21.3975*a)}function e(a,b,c){g.fillStyle=l,g.beginPath(),g.moveTo(a,b-20*c),g.lineTo(a+7*c,b-5*c),g.lineTo(a+21*c,b-5*c),g.lineTo(a+10*c,b+6*c),g.lineTo(a+13*c,b+20*c),g.lineTo(a-2*c,b+12*c),g.lineTo(a-13*c,b+20*c),g.lineTo(a-12*c,b+3*c),g.lineTo(a-21*c,b-5*c),g.lineTo(a-8*c,b-6*c),g.lineTo(a,b-20*c),g.fill()}var f,g,h,i,j,k,l,m=0;return{init:a,destroy:b}}();

/**
* Superload
* Superblink preloader som bruker superstars (visuals), preloadjs (grafikk) og howlerjs (lyd)
* (c) 2013 Agens AS
**/
SUPERLOAD=function(){function u(e,o,u,f,l,c){t=f;n=l;r=0;i={};s=c;SUPERSTARS.init(e,o,u);a(t)}function a(){if(t.length>0){e=new createjs.LoadQueue;e.addEventListener("complete",f);e.loadManifest(t)}else{f()}}function f(){if(n.length>0){var e=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||false;if(e){if(e<6){console.log("iOS "+e+" : no sound");o=true;c()}}l()}else{c()}}function l(){i[n[r].id]=new Howl({urls:[n[r].mp3,n[r].ogg],onload:function(){r+=1;if(r<n.length){l()}else{c()}}})}function c(){SUPERSTARS.destroy();s()}function h(t){return e.getResult(t)}function p(e){if(o){return{play:function(){}}}return i[e]}function d(e,t){var n=v(e.toString()+t.toString()+SCRT.game_id);var r;if(window.XMLHttpRequest){r=new XMLHttpRequest}else{r=new ActiveXObject("Microsoft.XMLHTTP")}r.open("POST","http://wp.agens.no/sb2/scores.php",true);r.setRequestHeader("Content-type","application/x-www-form-urlencoded");r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){console.log("response: "+r.responseText)}};r.send("log="+n+"&game_id="+e+"&score="+t)}function v(e){var t;var n=function(e,t){return e<<t|e>>>32-t};var r=function(e,t){var n,r,i,s,o;i=e&2147483648;s=t&2147483648;n=e&1073741824;r=t&1073741824;o=(e&1073741823)+(t&1073741823);if(n&r){return o^2147483648^i^s}if(n|r){if(o&1073741824){return o^3221225472^i^s}else{return o^1073741824^i^s}}else{return o^i^s}};var i=function(e,t,n){return e&t|~e&n};var s=function(e,t,n){return e&n|t&~n};var o=function(e,t,n){return e^t^n};var u=function(e,t,n){return t^(e|~n)};var a=function(e,t,s,o,u,a,f){e=r(e,r(r(i(t,s,o),u),f));return r(n(e,a),t)};var f=function(e,t,i,o,u,a,f){e=r(e,r(r(s(t,i,o),u),f));return r(n(e,a),t)};var l=function(e,t,i,s,u,a,f){e=r(e,r(r(o(t,i,s),u),f));return r(n(e,a),t)};var c=function(e,t,i,s,o,a,f){e=r(e,r(r(u(t,i,s),o),f));return r(n(e,a),t)};var h=function(e){var t;var n=e.length;var r=n+8;var i=(r-r%64)/64;var s=(i+1)*16;var o=new Array(s-1);var u=0;var a=0;while(a<n){t=(a-a%4)/4;u=a%4*8;o[t]=o[t]|e.charCodeAt(a)<<u;a++}t=(a-a%4)/4;u=a%4*8;o[t]=o[t]|128<<u;o[s-2]=n<<3;o[s-1]=n>>>29;return o};var p=function(e){var t="",n="",r,i;for(i=0;i<=3;i++){r=e>>>i*8&255;n="0"+r.toString(16);t=t+n.substr(n.length-2,2)}return t};var d=[],v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;d=h(e);w=1732584193;E=4023233417;S=2562383102;x=271733878;t=d.length;for(v=0;v<t;v+=16){m=w;g=E;y=S;b=x;w=a(w,E,S,x,d[v+0],T,3614090360);x=a(x,w,E,S,d[v+1],N,3905402710);S=a(S,x,w,E,d[v+2],C,606105819);E=a(E,S,x,w,d[v+3],k,3250441966);w=a(w,E,S,x,d[v+4],T,4118548399);x=a(x,w,E,S,d[v+5],N,1200080426);S=a(S,x,w,E,d[v+6],C,2821735955);E=a(E,S,x,w,d[v+7],k,4249261313);w=a(w,E,S,x,d[v+8],T,1770035416);x=a(x,w,E,S,d[v+9],N,2336552879);S=a(S,x,w,E,d[v+10],C,4294925233);E=a(E,S,x,w,d[v+11],k,2304563134);w=a(w,E,S,x,d[v+12],T,1804603682);x=a(x,w,E,S,d[v+13],N,4254626195);S=a(S,x,w,E,d[v+14],C,2792965006);E=a(E,S,x,w,d[v+15],k,1236535329);w=f(w,E,S,x,d[v+1],L,4129170786);x=f(x,w,E,S,d[v+6],A,3225465664);S=f(S,x,w,E,d[v+11],O,643717713);E=f(E,S,x,w,d[v+0],M,3921069994);w=f(w,E,S,x,d[v+5],L,3593408605);x=f(x,w,E,S,d[v+10],A,38016083);S=f(S,x,w,E,d[v+15],O,3634488961);E=f(E,S,x,w,d[v+4],M,3889429448);w=f(w,E,S,x,d[v+9],L,568446438);x=f(x,w,E,S,d[v+14],A,3275163606);S=f(S,x,w,E,d[v+3],O,4107603335);E=f(E,S,x,w,d[v+8],M,1163531501);w=f(w,E,S,x,d[v+13],L,2850285829);x=f(x,w,E,S,d[v+2],A,4243563512);S=f(S,x,w,E,d[v+7],O,1735328473);E=f(E,S,x,w,d[v+12],M,2368359562);w=l(w,E,S,x,d[v+5],_,4294588738);x=l(x,w,E,S,d[v+8],D,2272392833);S=l(S,x,w,E,d[v+11],P,1839030562);E=l(E,S,x,w,d[v+14],H,4259657740);w=l(w,E,S,x,d[v+1],_,2763975236);x=l(x,w,E,S,d[v+4],D,1272893353);S=l(S,x,w,E,d[v+7],P,4139469664);E=l(E,S,x,w,d[v+10],H,3200236656);w=l(w,E,S,x,d[v+13],_,681279174);x=l(x,w,E,S,d[v+0],D,3936430074);S=l(S,x,w,E,d[v+3],P,3572445317);E=l(E,S,x,w,d[v+6],H,76029189);w=l(w,E,S,x,d[v+9],_,3654602809);x=l(x,w,E,S,d[v+12],D,3873151461);S=l(S,x,w,E,d[v+15],P,530742520);E=l(E,S,x,w,d[v+2],H,3299628645);w=c(w,E,S,x,d[v+0],B,4096336452);x=c(x,w,E,S,d[v+7],j,1126891415);S=c(S,x,w,E,d[v+14],F,2878612391);E=c(E,S,x,w,d[v+5],I,4237533241);w=c(w,E,S,x,d[v+12],B,1700485571);x=c(x,w,E,S,d[v+3],j,2399980690);S=c(S,x,w,E,d[v+10],F,4293915773);E=c(E,S,x,w,d[v+1],I,2240044497);w=c(w,E,S,x,d[v+8],B,1873313359);x=c(x,w,E,S,d[v+15],j,4264355552);S=c(S,x,w,E,d[v+6],F,2734768916);E=c(E,S,x,w,d[v+13],I,1309151649);w=c(w,E,S,x,d[v+4],B,4149444226);x=c(x,w,E,S,d[v+11],j,3174756917);S=c(S,x,w,E,d[v+2],F,718787259);E=c(E,S,x,w,d[v+9],I,3951481745);w=r(w,m);E=r(E,g);S=r(S,y);x=r(x,b)}var q=p(w)+p(E)+p(S)+p(x);return q.toLowerCase()}var e;var t;var n;var r;var i;var s;var o=false;return{init:u,getGraphic:h,getSound:p,lagre:d}}()

/** FUNGRID 0.963 */
FUNGRID=function(){function T(e){try{}catch(t){return}}function N(e,t,n,r){e=e||0;t=t||0;n=n||0;r=r||0;var i={x:e,y:t,width:n,height:r};i.containsPoint=function(e){return e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height};i.intersects=function(e){return e.x<this.x+this.width&&e.x+e.width>this.x&&e.y<this.y+this.height&&e.y+e.height>this.y};return i}function C(){return f}function k(){return c}function L(e,t){e=e||0;t=t||0;p={x:e,y:t};p.toString=function(){return"{x:"+e+", y:"+t+"}"};return p}function A(o,u){e=u||1;canvasId=o||"canvas";t=document.getElementById(canvasId);f=t.width/e;c=t.height/e;h=t.width;d=t.height;v=N(0,0,f,c);m=L(0,0);n=t.getContext("2d");r=[];i=[];s=[];if(!t||!n){T("FunGrid init failed!");return}T("FunGrid initialized! Scale: "+e)}function O(e){e=e||"";F();R(e);if(x){q()}W(e)}function M(e){x=e}function _(e,t){t=t||"";e.view=t;r.push(e);if(e.polyLine){i.push(e)}if(e.zone){s.push(e)}return e}function D(){return n}function P(e,t){v.x=e;v.y=t;I(e,t)}function H(){return v.x}function B(){return v.y}function j(e,t,n,r){g=e;y=t;b=n;w=r}function F(){var e=m.x-v.x;var t=m.y-v.y;var n=Math.sqrt(e*e+t*t);if(n<.5){P(m.x,m.y)}else{n=n*.05;var r=Math.atan2(t,e);v.x+=n*Math.cos(r);v.y+=n*Math.sin(r)}if(g!==null){v.x=Math.max(v.x,g)}if(y!==null){v.x=Math.min(v.x,y)}if(b!==null){v.y=Math.max(v.y,b)}if(w!==null){v.y=Math.min(v.y,w)}}function I(e,t){if(g!==null){e=Math.max(e,g)}if(y!==null){e=Math.min(e,y)}if(b!==null){t=Math.max(t,b)}if(w!==null){t=Math.min(t,w)}m.x=e;m.y=t}function q(){n.clearRect(0,0,h,d)}function R(e){var t=-1;var n=r.length;var o;var u;for(var a=0;a<n;a++){if(r[a]){if(r[a].view===e){if(!r[a].update()){if(r[a].polyLine){o=i.length;for(u=0;u<o;u++){if(r[a]===i[u]){i.splice(u,1);u=o}}}if(r[a].zone){o=s.length;for(u=0;u<o;u++){if(r[a]===s[u]){s.splice(u,1);u=o}}}r[a].destroy();r[a]=null;r.splice(a,1);a--;n--}}}}}function U(e){e=e||"";var t=r.length;for(var n=0;n<t;n++){if(r[n].view===e){r[n].destroy()}}}function z(){var e=r.length;for(var t=0;t<e;t++){r[t].destroy()}r=[]}function W(e){var t=r.length;for(var n=0;n<t;n++){r[n].drawSprite(e);if(r[n].polyLine&&r[n].polyLineVisible||r[n].zone&&r[n].zoneVisible){r[n].drawPolyLines()}}}function X(e,t,n,r,i,s){e=e||null;t=t||null;n=n||null;r=r||null;i=i||null;s=s||null;var o={};o.repeatEveryX=e;o.noRepeatBeforeX=n;o.noRepeatAfterX=i;o.repeatEveryY=t;o.noRepeatBeforeY=r;o.noRepeatAfterY=s;return o}function V(e,t,n){var r;var s=i.length;var o;for(var u=0;u<s;u++){o=i[u].collision(e,t,n);if(o){if(r){if((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)<(r.point.x-e.x)*(r.point.x-e.x)+(r.point.y-e.y)*(r.point.y-e.y)){r=o}}else{r=o}}}return r}function $(e,t){t=t||"";var n=[];var r=s.length;for(var i=0;i<r;i++){if(s[i].containsPoint(e,t)){n.push(s[i])}}return n}function J(e,t){e.polyLine=t;e.polyLineVisible=false;e.polyLineLeft=null;e.polyLineRight=null;e.collision=function(e,t,n){n=n||false;var r;var i=L(e.x-this.posX,e.y-this.posY);var s=L(t.x-this.posX,t.y-this.posY);if(n||this.inViewport()){r=this.polyLine.collisionPoint(i,s);if(r){return{point:L(r.x+this.posX,r.y+this.posY),parameter:this.polyLine.lastCollisionPointParameter,polyLineGameObject:this}}}return null};e.pointFromParameter=function(e,t){t=t||false;var n=this.polyLine.pointFromParameter(e,t);if(n){return L(n.x+this.posX,n.y+this.posY)}return null};return e}function K(e){for(var t=0;t<e.length-1;t++){e[t].polyLineRight=e[t+1];e[t+1].polyLineLeft=e[t]}}function Q(e,t,n){n=n||"";e.zone=t;e.zoneVisible=false;e.zoneType=n;e.zoneEnabled=true;e.containsPoint=function(e,t){if(!this.zoneEnabled){return false}if(t===""||t===this.zoneType){if(this.zone.containsPoint(L(e.x-this.posX,e.y-this.posY))){return true}}}}function G(e){e.physics=true;e.moveable=true}function Y(t,r,i,s,o,u,a,f,c,p,v,m,g,y,b,w,E,S,x){r=r||null;if(!r)T(t+" GameObject(...) WARNING: image = null");i=i||0;s=s||0;if(o===undefined)o=1;if(u===undefined)u=1;a=a||null;f=f||false;c=c||0;p=p||0;v=v||0;m=m||0;g=g||null;y=y||null;b=b||null;w=w||null;E=E||0;S=S||1;x=x||1;var N={};N.idName=t;N.image=r;N.posX=i;N.posY=s;N.canvasPosX=i;N.canvasPosY=s;N.scrollFactorX=o;N.scrollFactorY=u;N.repeatSettings=a;N.moveable=f;N.speedX=c;N.speedY=p;N.accelerationX=v;N.accelerationY=m;N.minSpeedX=g;N.maxSpeedX=y;N.minSpeedY=b;N.maxSpeedY=w;N.rotation=E;N.scaleX=S;N.scaleY=x;N.destroyMe=false;N.visible=true;N.zone=null;N.polyLine=null;N.view="";N.physics=false;N.physicsOutsideViewport=false;N.polyLineGameObject=null;N.parameter=0;N.parameterSpeed=0;N.updates=0;N.dieAfterUpdates=null;N.dieOutsideViewport=null;N.dieOutsideRectangle=null;N.toString=function(){return this.idName+" "+this.posX+","+this.posY+" "+this.canvasPosX+","+this.canvasPosY};N.update=function(){N.updates+=1;if(this.destroyMe){return false}this.customEarlyUpdate();if(this.moveable){this.updateSpeed();if(this.physics){this.updatePhysics()}else{this.updateGridPosition()}}this.customBeforeUpdateCanvasPosition();this.updateCanvasPosition();this.customAfterUpdateCanvasPosition();if(this.repeatSettings!=null){this.updateRepetition()}this.customLateUpdate();return this.updateDies()};N.updateDies=function(){if(this.dieAfterUpdates){if(this.updates>=this.dieAfterUpdates){this.destroyMe=true;return false}}if(this.dieOutsideViewport){if(!this.inViewport()){this.destroyMe=true;return false}}if(this.dieOutsideRectangle){if(!this.dieOutsideViewport.containsPoint(L(this.posX,this.posY))){this.destroyMe=true;return false}}return true};N.destroy=function(){this.destroyMe=true;T(this.idName+" destroyed!")};N.customEarlyUpdate=function(){};N.customBeforeUpdateCanvasPosition=function(){};N.customAfterUpdateCanvasPosition=function(){};N.customLateUpdate=function(){};N.customOnRepeat=function(){};N.customEnterPolyLineGameObject=function(){};N.updateSpeed=function(){this.speedX+=this.accelerationX;this.speedY+=this.accelerationY;if(this.maxSpeedX!=null){this.speedX=Math.min(this.speedX,this.maxSpeedX)}if(this.minSpeedX!=null){this.speedX=Math.max(this.speedX,this.minSpeedX)}if(this.maxSpeedY!=null){this.speedY=Math.min(this.speedY,this.maxSpeedY)}if(this.minSpeedY!=null){this.speedY=Math.max(this.speedY,this.minSpeedY)}};N.addSprite=function(e,t,n,r,i,s,o,u,a,f,l){if(r+t>this.image.width){FUNGRID.log("Warning! "+this.idName+" Sprite "+e+" is exceeding the image (too wide). Will not draw.")}if(i+n>this.image.height){FUNGRID.log("Warning! "+this.idName+" Sprite "+e+" is exceeding the image (too high). Will not draw.")}e=e||"idle";t=t||0;n=n||0;if(this.image){r=r||this.image.width;i=i||this.image.height}else{r=r||0;i=i||0}s=s||0;o=o||0;u=u||r;a=a||i;f=f||s;l=l||o;var c=Math.max(u+f,a+l);if(!this.sprites||this.sprites.length==1&&this.sprites[0].autosprite){this.sprites=[];this.spriteIndex=0}this.sprites.push({idName:e,sx:t,sy:n,swidth:r,sheight:i,soffsetx:s,soffsety:o,imageDrawWidth:u,imageDrawHeight:a,rotationOffsetX:f,rotationOffsetY:l,maxDrawingRadius:c})};N.setSprite=function(e){l=this.sprites.length;for(var t=0;t<l;t++){if(this.sprites.idNAme===e){this.spriteIndex=t;return}}FUNGRID.log("Sprite "+e+" not found on GameObject "+this.idName)};N.drawPolyLines=function(){if(this.polyLine){n.beginPath();n.moveTo((this.polyLine.points[0].x+this.canvasPosX)*e,(this.polyLine.points[0].y+this.canvasPosY)*e);var t=this.polyLine.length;for(var r=1;r<t;r++){n.lineTo((this.polyLine.points[r].x+this.canvasPosX)*e,(this.polyLine.points[r].y+this.canvasPosY)*e)}n.stroke()}if(this.zone){n.beginPath();n.moveTo((this.zone.points[0].x+this.canvasPosX)*e,(this.zone.points[0].y+this.canvasPosY)*e);var t=this.zone.length;for(var r=1;r<t;r++){n.lineTo((this.zone.points[r].x+this.canvasPosX)*e,(this.zone.points[r].y+this.canvasPosY)*e)}n.stroke()}};N.drawSprite=function(t){if(!this.visible||!this.image||!this.inViewport()||this.view!==t&&this.view!==""){return}if(this.spriteDD===undefined){this.lastSpriteIndex=-1;this.spriteDD={}}if(true||this.lastSpriteIndex!==this.spriteIndex){this.spriteDD.sx=this.sprites[this.spriteIndex].sx*e;this.spriteDD.sy=this.sprites[this.spriteIndex].sy*e;this.spriteDD.swidth=this.sprites[this.spriteIndex].swidth*e;this.spriteDD.sheight=this.sprites[this.spriteIndex].sheight*e;this.spriteDD.w=this.sprites[this.spriteIndex].imageDrawWidth*this.scaleX*e;this.spriteDD.h=this.sprites[this.spriteIndex].imageDrawHeight*this.scaleY*e;this.lastSpriteIndex=this.spriteIndex}this.spriteDD.x=Math.round(this.canvasPosX+this.sprites[this.spriteIndex].soffsetx*this.scaleX)*e;this.spriteDD.y=Math.round(this.canvasPosY+this.sprites[this.spriteIndex].soffsety*this.scaleY)*e;if(this.rotation!==0){var r=this.sprites[this.spriteIndex].rotationOffsetX*this.scaleX*e;var i=this.sprites[this.spriteIndex].rotationOffsetY*this.scaleY*e;var s=this.rotation*Math.PI/180;var o=this.spriteDD.x-r;var u=this.spriteDD.y-i;n.translate(o,u);n.rotate(s);n.drawImage(this.image,this.spriteDD.sx,this.spriteDD.sy,this.spriteDD.swidth,this.spriteDD.sheight,r,i,this.spriteDD.w,this.spriteDD.h);n.rotate(-s);n.translate(-o,-u)}else{if(this.spriteDD.x<0){this.spriteDD.sx-=this.spriteDD.x/this.scaleX;this.spriteDD.swidth+=this.spriteDD.x/this.scaleX;this.spriteDD.w+=this.spriteDD.x;this.spriteDD.x=0}var a=this.spriteDD.x+this.spriteDD.w-h;if(a>0){this.spriteDD.swidth-=a/this.scaleX;this.spriteDD.w-=a}if(this.spriteDD.swidth<1){return}if(this.spriteDD.y<0){this.spriteDD.sy-=this.spriteDD.y/this.scaleY;this.spriteDD.sheight+=this.spriteDD.y/this.scaleY;this.spriteDD.h+=this.spriteDD.y;this.spriteDD.y=0}var f=this.spriteDD.y+this.spriteDD.h-d;if(f>0){this.spriteDD.sheight-=f/this.scaleY;this.spriteDD.h-=f}if(this.spriteDD.sheight<1){return}this.drawSprite2()}};N.drawSprite2=function(){n.drawImage(this.image,this.spriteDD.sx,this.spriteDD.sy,this.spriteDD.swidth,this.spriteDD.sheight,this.spriteDD.x,this.spriteDD.y,this.spriteDD.w,this.spriteDD.h)};N.inViewport=function(){if(this.rotation!==0){if(this.canvasPosX-this.sprites[this.spriteIndex].maxDrawingRadius*this.scaleX>t){return false}if(this.canvasPosX+this.sprites[this.spriteIndex].maxDrawingRadius*this.scaleX<0){return false}if(this.canvasPosY-this.sprites[this.spriteIndex].maxDrawingRadius*this.scaleY>r){return false}if(this.canvasPosY+this.sprites[this.spriteIndex].maxDrawingRadius*this.scaleY<0){return false}}else{var e=this.canvasPosX+this.sprites[this.spriteIndex].soffsetx*this.scaleX;if(e>t){return false}var t=this.sprites[this.spriteIndex].imageDrawWidth*this.scaleX;if(e+t<0){return false}var n=this.canvasPosY+this.sprites[this.spriteIndex].soffsety*this.scaleY;if(n>r){return false}var r=this.sprites[this.spriteIndex].imageDrawHeight*this.scaleY;if(n+r<0){return false}}return true};N.updateGridPosition=function(){this.posX+=this.speedX;this.posY+=this.speedY};N.updatePhysics=function(){if(this.polyLineGameObject){this.parameter+=this.parameterSpeed;var e=this.polyLineGameObject.pointFromParameter(this.parameter);if(e){this.posX=e.x;this.posY=e.y}else{if(this.parameter<0&&this.polyLineGameObject.polyLineLeft){while(this.parameter<0){if(this.polyLineGameObject.polyLineLeft){if(this.jumpCheckLeft()){this.leavePolyLineGameObject();break}else{this.polyLineGameObject=this.polyLineGameObject.polyLineLeft;this.parameter+=this.polyLineGameObject.polyLine.totalLength;e=this.polyLineGameObject.pointFromParameter(this.parameter);if(e){this.posX=e.x;this.posY=e.y}}}else{this.leavePolyLineGameObject()}}}else if(this.parameter>this.polyLineGameObject.polyLine.totalLength&&this.polyLineGameObject.polyLineRight){while(this.parameter>this.polyLineGameObject.polyLine.totalLength){if(this.polyLineGameObject.polyLineRight){if(this.jumpCheckRight()){this.leavePolyLineGameObject();break}else{this.parameter-=this.polyLineGameObject.polyLine.totalLength;this.polyLineGameObject=this.polyLineGameObject.polyLineRight;e=this.polyLineGameObject.pointFromParameter(this.parameter);if(e){this.posX=e.x;this.posY=e.y}}}else{this.leavePolyLineGameObject()}}}else{this.leavePolyLineGameObject()}}}else{var t=V(L(this.posX,this.posY),L(this.posX+this.speedX,this.posY+this.speedY),this.physicsOutsideViewport);if(t&&this.speedY>0){this.polyLineGameObject=t.polyLineGameObject;this.parameter=t.parameter;this.posX=t.point.x;this.posY=t.point.y;this.customEnterPolyLineGameObject()}else{this.updateGridPosition()}}};N.leavePolyLineGameObject=function(){var e=this.polyLineGameObject.pointFromParameter(this.parameter,true);this.speedX=e.x-this.posX;this.speedY=e.y-this.posY;this.polyLineGameObject=null;this.updateGridPosition()};N.jumpCheckLeft=function(){return false};N.jumpCheckRight=function(){return false};N.inside=function(e,t){e+=this.sprites[this.spriteIndex].soffsetx*this.scaleX;if(e>=this.canvasPosX&&e<=this.canvasPosX+this.sprites[this.spriteIndex].imageDrawWidth*this.scaleX){t+=this.sprites[this.spriteIndex].soffsety*this.scaleY;if(t>=this.canvasPosY&&t<=this.canvasPosY+this.sprites[this.spriteIndex].imageDrawHeight*this.scaleY){return true}}return false};N.updateCanvasPosition=function(){if(this.scrollFactorX!==0){this.canvasPosX=this.scrollFactorX*(this.posX-nt().x);this.canvasPosY=this.scrollFactorY*(this.posY-nt().y)}else{this.canvasPosX=this.posX;if(this.scrollFactorY!==0){this.canvasPosY=this.scrollFactorY*(this.posY-nt().y)}else{this.canvasPosY=this.posY}}};N.updateRepetition=function(){if(this.repeatSettings.repeatEveryX!=null){if(this.canvasPosX+this.sprites[this.spriteIndex].soffsetx+this.sprites[this.spriteIndex].imageDrawWidth<0){this.posX+=this.repeatSettings.repeatEveryX/this.scrollFactorX;if(this.repeatSettings.noRepeatAfterX!=null){if(this.posX>this.repeatSettings.noRepeatAfterX/this.scrollFactorX){this.posX-=this.repeatSettings.repeatEveryX/this.scrollFactorX}}this.customOnRepeat();this.updateCanvasPosition()}else if(this.canvasPosX>this.repeatSettings.repeatEveryX-this.sprites[this.spriteIndex].soffsetx-this.sprites[this.spriteIndex].imageDrawWidth){this.posX-=this.repeatSettings.repeatEveryX/this.scrollFactorX;if(this.repeatSettings.noRepeatBeforeX!=null){if(this.posX<this.repeatSettings.noRepeatBeforeX/this.scrollFactorX){this.posX+=this.repeatSettings.repeatEveryX/this.scrollFactorX}}this.customOnRepeat();this.updateCanvasPosition()}}if(this.repeatSettings.repeatEveryY!=null){if(this.canvasPosY+this.sprites[this.spriteIndex].soffsety+this.sprites[this.spriteIndex].imageDrawHeight<0){this.posY+=this.repeatSettings.repeatEveryY/this.scrollFactorY;if(this.repeatSettings.noRepeatAfterY){if(this.posY>this.repeatSettings.noRepeatAfterY/this.scrollFactorY){this.posY-=this.repeatSettings.repeatEveryY/this.scrollFactorY}}this.customOnRepeat();this.updateCanvasPosition()}else if(this.canvasPosY>this.repeatSettings.repeatEveryY-this.sprites[this.spriteIndex].soffsety-this.sprites[this.spriteIndex].imageDrawHeight){this.posY-=this.repeatSettings.repeatEveryY/this.scrollFactorY;if(this.repeatSettings.noRepeatBeforeY!=null){if(this.posY<this.repeatSettings.noRepeatBeforeY/this.scrollFactorY){this.posY+=this.repeatSettings.repeatEveryY/this.scrollFactorY}}this.customOnRepeat();this.updateCanvasPosition()}}};N.addSprite();N.sprites[0].autosprite=true;return N}function Z(e){e=e||[];var t={};t.points=e;t.lastCollisionPointParameter;t.init=function(){this.lengths=[];this.length=this.points.length;this.derivatives=[];this.totalLength=0;this.closed=false;var t;var n;var r;var i;for(var s=0;s<this.length;s++){if(s<this.length-1){var o=Math.sqrt((this.points[s+1].x-this.points[s].x)*(this.points[s+1].x-this.points[s].x)+(this.points[s+1].y-this.points[s].y)*(this.points[s+1].y-this.points[s].y));this.lengths.push(o);this.derivatives.push((this.points[s+1].y-this.points[s].y)/(this.points[s+1].x-this.points[s].x));this.totalLength+=o}if(s===0){t=r=this.points[s].x;n=i=this.points[s].y}else{if(this.points[s].x<t){t=this.points[s].x}else if(this.points[s].x>r){r=this.points[s].x}if(this.points[s].y<n){n=this.points[s].y}else if(this.points[s].y>i){i=this.points[s].y}}}this.boundRect=FUNGRID.Rectangle(t,n,r-t,i-n);if(e[0].x===this.points[this.length-1].x&&this.points[0].y===this.points[this.length-1].y){this.closed=true}};t.init();t.containsPoint=function(e){if(!this.closed||!this.boundRect.containsPoint(e)){return false}var t=false;var n=this.points[this.length-1].x;var r=this.points[this.length-1].y;var i;var s;var o;var u;var a;var f;var l=this.length;for(var c=0;c<l;c++){a=this.points[c].x;f=this.points[c].y;if(a>n){i=n;o=a;s=r;u=f}else{i=a;o=n;s=f;u=r}if(a<e.x==e.x<=n&&(e.y-s)*(o-i)<(u-s)*(e.x-i)){t=!t}n=a;r=f}return t};t.intersectsBoundRect=function(e){return this.boundRect.intersects(e)};t.intersectionPoint=function(e,t,n,r){var i=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y);if(i!==0){var s=(r.x-n.x)*(e.y-n.y)-(r.y-n.y)*(e.x-n.x);var o=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x);var u=s/i;var a=o/i;if(u>=0&&u<=1&&a>=0&&a<=1){return L(e.x+u*(t.x-e.x),e.y+u*(t.y-e.y))}}return null};t.collisionPoint=function(e,t){var n=null;var r=0;var i;var s=this.length-1;for(var o=0;o<s;o++){i=this.intersectionPoint(e,t,this.points[o],this.points[o+1]);if(i){if(n){if(Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y))<Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))){n=i;this.lastCollisionPointParameter=r+Math.sqrt((i.x-this.points[o].x)*(i.x-this.points[o].x)+(i.y-this.points[o].y)*(i.y-this.points[o].y))}}else{n=i;this.lastCollisionPointParameter=r+Math.sqrt((i.x-this.points[o].x)*(i.x-this.points[o].x)+(i.y-this.points[o].y)*(i.y-this.points[o].y))}}r+=this.lengths[o]}return n};t.derivativeFromParameter=function(e){var t=this.length;for(var n=0;n<t;n++){if(e>this.lengths[n]){e-=this.lengths[n]}else{return derivatives[n]}}if(e<0){return derivatives[0]}return derivatives[derivatives.length-1]};t.pointFromParameter=function(e,t){t=t||false;if(t){if(e<0){var n=Math.atan(this.derivatives[0]);return L(e*Math.cos(n)+this.points[0].x,e*Math.sin(n)+this.points[0].y)}else if(e>this.totalLength){e-=this.totalLength;var n=Math.atan(this.derivatives[this.derivatives.length-1]);return L(e*Math.cos(n)+this.points[this.length-1].x,e*Math.sin(n)+this.points[this.length-1].y)}}if(this.closed){while(e<0){e+=this.totalLength}while(e>this.totalLength){e-=this.totalLength}}else if(e<0||e>this.totalLength){return null}var r=this.length;for(var i=0;i<r;i++){if(e>this.lengths[i]){e-=this.lengths[i]}else{return L(this.points[i].x+e*(this.points[i+1].x-this.points[i].x)/this.lengths[i],this.points[i].y+e*(this.points[i+1].y-this.points[i].y)/this.lengths[i])}}return null};t.close=function(){if(!this.closed){this.points.push(L(this.points[0].x,this.points[0].y));this.init()}};return t}function et(e,t,n,r){var i=document.createElement("canvas");i.width=e.width;i.height=e.height;var s=i.getContext("2d");s.drawImage(e,0,0);var o=s.getImageData(0,0,i.width,i.height);var u=0;var a=o.data.length;for(var f=0;f<a;f+=4){if(o.data[f+3]>0){o.data[f]=Math.max(0,Math.min(255,t));o.data[f+1]=Math.max(0,Math.min(255,n));o.data[f+2]=Math.max(0,Math.min(255,r))}}s.putImageData(o,0,0);return i}function tt(){return t.toDataURL("image/png")}function nt(){return v}T("FunGrid.js v0.962");var e;var t;var n;var r=[];var i=[];var s=[];var o=0;var u=0;var a=0;var f=0;var c=0;var h=0;var d=0;var v;var m;var g=null;var y=null;var b=null;var w=null;var E=2e3;var S=1.5;var x=false;return{log:T,Rectangle:N,Point:L,init:A,update:O,addGameObject:_,moveViewport:P,updateViewport:F,setFutureViewport:I,futureViewport:m,clearCanvas:q,updateGameObjects:R,destroy:z,destroyView:U,drawGameObjects:W,RepeatSettings:X,polyLineCollision:V,zonesContainsPoint:$,addPolyLineToGameObject:J,connectPolyLineGameObjects:K,addZoneToGameObject:Q,addPhysicsToGameObject:G,GameObject:Y,PolyLine:Z,simpleTint:et,setClearCanvas:M,getContext:D,toDataURL:tt,getViewport:nt,width:C,height:k,viewportSettings:j,vpX:H,vpY:B}}()

/** FUNTOUCH 0.6 */
var FUNTOUCH={};FUNTOUCH.canvas=null;FUNTOUCH.scale=1;FUNTOUCH.scalefactor=1;FUNTOUCH.isDown=false;FUNTOUCH.firstX=-1;FUNTOUCH.firstY=-1;FUNTOUCH.lastX=-1;FUNTOUCH.lastY=-1;FUNTOUCH.X;FUNTOUCH.Y;FUNTOUCH.touches=[];FUNTOUCH.customDown=null;FUNTOUCH.customUp=null;FUNTOUCH.customTap=null;FUNTOUCH.preventDefault=true;FUNTOUCH.init=function(e,t){e=e||"canvas";FUNTOUCH.canvas=document.getElementById(e);FUNTOUCH.scale=t||1;FUNTOUCH.scalefactor=1/FUNTOUCH.scale;FUNTOUCH.canvas.onselectstart=function(){return false};FUNTOUCH.canvas.addEventListener("mousedown",FUNTOUCH.mouseDown,false);FUNTOUCH.canvas.addEventListener("mousemove",FUNTOUCH.mouseXY,false);document.body.addEventListener("mouseup",FUNTOUCH.mouseUp,false);FUNTOUCH.canvas.addEventListener("touchstart",FUNTOUCH.touchDown,false);FUNTOUCH.canvas.addEventListener("touchmove",FUNTOUCH.touchXY,true);FUNTOUCH.canvas.addEventListener("touchend",FUNTOUCH.touchUp,false);document.body.addEventListener("touchcancel",FUNTOUCH.touchUp,false)};FUNTOUCH.setCursorStyle=function(e){e=e||"default";if(FUNTOUCH.canvas){FUNTOUCH.canvas.style.cursor=e}};FUNTOUCH.isTouchSupported=function(){var e=window.navigator.msMaxTouchPoints;var t="ontouchstart"in document.createElement("div");if(e||t){return true}return false};FUNTOUCH.absoluteOffsetLeft=function(){var e=0;var t=FUNTOUCH.canvas;if(t.offsetParent){do{e+=t.offsetLeft}while(t=t.offsetParent)}return e};FUNTOUCH.absoluteOffsetTop=function(){var e=0;var t=FUNTOUCH.canvas;if(t.offsetParent){do{e+=t.offsetTop}while(t=t.offsetParent)}return e};FUNTOUCH.mouseDown=function(e){FUNTOUCH.isDown=true;FUNTOUCH.firstX=e.pageX-FUNTOUCH.absoluteOffsetLeft();FUNTOUCH.firstY=e.pageY-FUNTOUCH.absoluteOffsetTop();FUNTOUCH.firstX*=FUNTOUCH.scalefactor;FUNTOUCH.firstY*=FUNTOUCH.scalefactor;FUNTOUCH.mouseXY(e);if(FUNTOUCH.customDown){FUNTOUCH.customDown()}};FUNTOUCH.mouseXY=function(e){if(!e)var e=event;if(FUNTOUCH.isDown){FUNTOUCH.lastX=e.pageX-FUNTOUCH.absoluteOffsetLeft();FUNTOUCH.lastY=e.pageY-FUNTOUCH.absoluteOffsetTop();FUNTOUCH.lastX*=FUNTOUCH.scalefactor;FUNTOUCH.lastY*=FUNTOUCH.scalefactor;FUNTOUCH.touches[0]=e}FUNTOUCH.X=FUNTOUCH.scalefactor*(e.pageX-FUNTOUCH.absoluteOffsetLeft());FUNTOUCH.Y=FUNTOUCH.scalefactor*(e.pageY-FUNTOUCH.absoluteOffsetTop())};FUNTOUCH.mouseUp=function(e){FUNTOUCH.isDown=false;FUNTOUCH.mouseXY(e);FUNTOUCH.touches[0]=null;if(FUNTOUCH.customUp){FUNTOUCH.customUp()}if(FUNTOUCH.customTap){if(Math.abs(FUNTOUCH.lastX-FUNTOUCH.firstX)<10&&Math.abs(FUNTOUCH.lastY-FUNTOUCH.firstY)<10){FUNTOUCH.customTap()}}};FUNTOUCH.touchDown=function(e){FUNTOUCH.isDown=true;FUNTOUCH.firstX=e.targetTouches[0].pageX-FUNTOUCH.absoluteOffsetLeft();FUNTOUCH.firstY=e.targetTouches[0].pageY-FUNTOUCH.absoluteOffsetTop();FUNTOUCH.firstX*=FUNTOUCH.scalefactor;FUNTOUCH.firstY*=FUNTOUCH.scalefactor;FUNTOUCH.touchXY(e);if(FUNTOUCH.customDown){FUNTOUCH.customDown()}};FUNTOUCH.touchXY=function(e){if(!e)var e=event;FUNTOUCH.lastX=e.targetTouches[0].pageX-FUNTOUCH.absoluteOffsetLeft();FUNTOUCH.lastY=e.targetTouches[0].pageY-FUNTOUCH.absoluteOffsetTop();FUNTOUCH.lastX*=FUNTOUCH.scalefactor;FUNTOUCH.lastY*=FUNTOUCH.scalefactor;FUNTOUCH.X=FUNTOUCH.lastX;FUNTOUCH.Y=FUNTOUCH.lastY;FUNTOUCH.touches=e.targetTouches;if(FUNTOUCH.preventDefault){e.preventDefault()}};FUNTOUCH.touchUp=function(e){FUNTOUCH.isDown=false;FUNTOUCH.touches=e.targetTouches;if(FUNTOUCH.customUp){FUNTOUCH.customUp()}if(FUNTOUCH.customTap){if(Math.abs(FUNTOUCH.lastX-FUNTOUCH.firstX)<10&&Math.abs(FUNTOUCH.lastY-FUNTOUCH.firstY)<10){FUNTOUCH.customTap()}}}

/** FUNKEYS 0.3 */
var FUNKEYS={};FUNKEYS.preventDefault=true;FUNKEYS.initArrowsAndSpace=function(){FUNKEYS.upIsDown=false;FUNKEYS.customUpDown=function(){};FUNKEYS.customUpUp=function(){};FUNKEYS.downIsDown=false;FUNKEYS.customDownDown=function(){};FUNKEYS.customDownUp=function(){};FUNKEYS.leftIsDown=false;FUNKEYS.customLeftDown=function(){};FUNKEYS.customLeftUp=function(){};FUNKEYS.rightIsDown=false;FUNKEYS.customRightDown=function(){};FUNKEYS.customRightUp=function(){};FUNKEYS.spaceIsDown=false;FUNKEYS.customSpaceDown=function(){};FUNKEYS.customSpaceUp=function(){};document.onkeydown=FUNKEYS.checkKeyDown;document.onkeyup=FUNKEYS.checkKeyUp};FUNKEYS.checkKeyDown=function(e){e=e||window.event;if(FUNKEYS.preventDefault){e.preventDefault()}if(e.keyCode=="38"){FUNKEYS.upIsDown=true;FUNKEYS.customUpDown()}else if(e.keyCode=="40"){FUNKEYS.downIsDown=true;FUNKEYS.customDownDown()}else if(e.keyCode=="37"){FUNKEYS.leftIsDown=true;FUNKEYS.customLeftDown()}else if(e.keyCode=="39"){FUNKEYS.rightIsDown=true;FUNKEYS.customRightDown()}else if(e.keyCode=="32"){FUNKEYS.spaceIsDown=true;FUNKEYS.customSpaceDown()}};FUNKEYS.checkKeyUp=function(e){e=e||window.event;if(e.keyCode=="38"){FUNKEYS.upIsDown=false;FUNKEYS.customUpUp()}else if(e.keyCode=="40"){FUNKEYS.downIsDown=false;FUNKEYS.customDownUp()}else if(e.keyCode=="37"){FUNKEYS.leftIsDown=false;FUNKEYS.customLeftUp()}else if(e.keyCode=="39"){FUNKEYS.rightIsDown=false;FUNKEYS.customRightUp()}else if(e.keyCode=="32"){FUNKEYS.spaceIsDown=false;FUNKEYS.customSpaceUp()}}

var FKR={};FKR.orientationWarning=false;FKR.s=1;window.onresize=function(){FKR.onResize()};FKR.onResize=function(){FKR.orientationWarning=false;if(window.screen.width<window.screen.height&&window.innerWidth<=480*FKR.s){FKR.orientationWarning=true}};FKR.init=function(e){FKR.lang="no";FKR.s=e||1;FKR.onResize();FKR.firstJump=true;FKR.level=0;var t;if(FKR.s==2){t=[{id:"sprites",src:"gfx/finnkrybben.png"}]}else{t=[{id:"sprites",src:"gfx/finnkrybben_05.png"}]}SUPERLOAD.init("canvas","black","#FFFF66",t,[{id:"bae",mp3:"gfx/bae.mp3",ogg:"gfx/bae.ogg"},{id:"bae2",mp3:"gfx/bae2.mp3",ogg:"gfx/bae2.ogg"},{id:"start",mp3:"gfx/start.mp3",ogg:"gfx/start.ogg"},{id:"busk",mp3:"gfx/busk.mp3",ogg:"gfx/busk.ogg"},{id:"theme",mp3:"gfx/theme.mp3",ogg:"gfx/theme.ogg"},{id:"win",mp3:"gfx/win.mp3",ogg:"gfx/win.ogg"},{id:"star",mp3:"gfx/star.mp3",ogg:"gfx/star.ogg"},{id:"lande",mp3:"gfx/lande.mp3",ogg:"gfx/lande.ogg"},{id:"die",mp3:"gfx/die.mp3",ogg:"gfx/die.ogg"}],FKR.init2);FKR.tilstand="MENY";if(typeof Storage!=="undefined"){if(localStorage.FKrekord1){FKR.rekord=JSON.parse(localStorage.FKrekord1)}else{FKR.rekord=0;localStorage.FKrekord1=JSON.stringify(FKR.rekord)}}else{FKR.rekord=0}};FKR.init2=function(){FKR.score=0;FUNGRID.init("canvas",FKR.s);FUNGRID.setClearCanvas(false);FUNGRID.viewportSettings(null,null,null,null);FKR.bg=FUNGRID.GameObject("bg",SUPERLOAD.getGraphic("sprites"),0,-500,0,.2);FKR.bg.addSprite("bg",0,0,480,320);FUNGRID.addGameObject(FKR.bg,"game");FKR.busk=FUNGRID.GameObject("busk",SUPERLOAD.getGraphic("sprites"),700,120,1,1,FUNGRID.RepeatSettings(2200));FKR.busk.addSprite("pf",0,393,38,21,-18,-20);FUNGRID.addGameObject(FKR.busk,"game");FKR.busk.customBeforeUpdateCanvasPosition=function(){if(FKR.protagonist.posX>this.posX-15&&FKR.protagonist.posX<this.posX+15&&FKR.protagonist.posY>this.posY-12&&FKR.protagonist.posY<this.posY+25){FKR.protagonist.hit()}};FKR.hus3=FUNGRID.GameObject("hus3",SUPERLOAD.getGraphic("sprites"),2280,0,1,1,FUNGRID.RepeatSettings(4400));FKR.hus3.addSprite("hus3",245,345,100,100);FUNGRID.addPolyLineToGameObject(FKR.hus3,FUNGRID.PolyLine([{x:-5,y:0},{x:108,y:0}]));FUNGRID.addGameObject(FKR.hus3,"game");FKR.hus4=FUNGRID.GameObject("hus3",SUPERLOAD.getGraphic("sprites"),1130,0,1,1,FUNGRID.RepeatSettings(3300));FKR.hus4.addSprite("hus3",345,345,50,100);FUNGRID.addPolyLineToGameObject(FKR.hus4,FUNGRID.PolyLine([{x:-5,y:0},{x:58,y:0}]));FUNGRID.addGameObject(FKR.hus4,"game");FKR.hus2=FUNGRID.GameObject("hus2",SUPERLOAD.getGraphic("sprites"),2500,39,1,1,FUNGRID.RepeatSettings(3300));FKR.hus2.addSprite("hus2",145,393,100,61);FUNGRID.addPolyLineToGameObject(FKR.hus2,FUNGRID.PolyLine([{x:-5,y:0},{x:108,y:0}]));FUNGRID.addGameObject(FKR.hus2,"game");FKR.hus1=FUNGRID.GameObject("hus1",SUPERLOAD.getGraphic("sprites"),1400,50,1,1,FUNGRID.RepeatSettings(2200));FKR.hus1.addSprite("hus1",95,393,50,50);FUNGRID.addPolyLineToGameObject(FKR.hus1,FUNGRID.PolyLine([{x:-5,y:0},{x:58,y:0}]));FUNGRID.addGameObject(FKR.hus1,"game");FKR.gbusk=FUNGRID.GameObject("gbusk",SUPERLOAD.getGraphic("sprites"),270,86,1,1,FUNGRID.RepeatSettings(4400));FKR.gbusk.addSprite("gbusk",432,404,29,15);FUNGRID.addGameObject(FKR.gbusk,"game");FKR.gbusk2=FUNGRID.GameObject("gbusk",SUPERLOAD.getGraphic("sprites"),4450,86,1,1,FUNGRID.RepeatSettings(2210,null,1e3));FKR.gbusk2.addSprite("gbusk",432,404,29,15);FUNGRID.addGameObject(FKR.gbusk2,"game");var e=FUNGRID.PolyLine([{x:-5,y:0},{x:488,y:0}]);FKR.pf=FUNGRID.GameObject("pf",SUPERLOAD.getGraphic("sprites"),0,100,1,1,FUNGRID.RepeatSettings(1100));FKR.pf.addSprite("pf",0,320,480,25);FUNGRID.addPolyLineToGameObject(FKR.pf,e);FUNGRID.addGameObject(FKR.pf,"game");FKR.pf2=FUNGRID.GameObject("pf2",SUPERLOAD.getGraphic("sprites"),550,120,1,1,FUNGRID.RepeatSettings(1100));FKR.pf2.addSprite("pf2",0,320,480,25);FUNGRID.addPolyLineToGameObject(FKR.pf2,e);FUNGRID.addGameObject(FKR.pf2,"game");var t=FUNGRID.PolyLine([{x:-5,y:0},{x:83,y:0}]);FKR.pf4=FUNGRID.GameObject("pf3",SUPERLOAD.getGraphic("sprites"),1200,50,1,1,FUNGRID.RepeatSettings(2300));FKR.pf4.addSprite("pf4",0,414,75,25);FUNGRID.addPolyLineToGameObject(FKR.pf4,t);FUNGRID.addGameObject(FKR.pf4,"game");FKR.pf3=FUNGRID.GameObject("pf3",SUPERLOAD.getGraphic("sprites"),1e3,65,1,1,FUNGRID.RepeatSettings(2e3));FKR.pf3.addSprite("pf3",0,414,75,25);FUNGRID.addPolyLineToGameObject(FKR.pf3,t);FUNGRID.addGameObject(FKR.pf3,"game");FKR.stall=FUNGRID.GameObject("stall",SUPERLOAD.getGraphic("sprites"),11800,66);FKR.stall.addSprite("stall",395,345,64,58);FUNGRID.addGameObject(FKR.stall,"game");FKR.pf5=FUNGRID.GameObject("pf5",SUPERLOAD.getGraphic("sprites"),10550,-10,1,1);FKR.pf5.addSprite("pf5",0,414,75,25);FUNGRID.addPolyLineToGameObject(FKR.pf5,t);FUNGRID.addGameObject(FKR.pf5,"game");FKR.lagStjerne(500,50,1200);FKR.lagStjerne(1500,-10,2200);FKR.lagStjerne(2590,-30,6550);FKR.lagStjerne(1220,-75,9480);FKR.protagonist=FUNGRID.GameObject("hyrde",SUPERLOAD.getGraphic("sprites"),-12,96);FKR.protagonist.addSprite("ro",0,358,16,33,-6,-31);FUNGRID.addPhysicsToGameObject(FKR.protagonist);FKR.protagonist.visible=false;FKR.protagonist.readyForChange=false;FKR.protagonist.hopp=function(){if(FKR.tilstand==="WIN"){SUPERLOAD.getSound("start").play();FKR.win.visible=false;FKR.resetTilMeny();return}else if(FKR.tilstand==="MENY"){FUNTOUCH.preventDefault=true;FUNKEYS.preventDefault=true;SUPERLOAD.getSound("start").play();if(FKR.firstJump){SUPERLOAD.getSound("theme").loop(true);SUPERLOAD.getSound("theme").play();FKR.firstJump=false}FKR.tilstand="GAME";FKR.meny.visible=false;FKR.protagonist.parameterSpeed=3;FUNGRID.viewportSettings(100,null,-100,-70)}else{if(this.polyLineGameObject){this.leavePolyLineGameObject();this.speedY=-9;this.speedX=this.parameterSpeed;this.posX-=2}}};FKR.protagonist.customBeforeUpdateCanvasPosition=function(e){var t=true;if(FKR.tilstand==="MENY"){if(this.posX>=200){FKR.protagonist.parameterSpeed=0;this.posX=200;this.spriteIndex=0;t=false}}if(this.posX>=11800&&FKR.tilstand==="GAME"){FKR.tilstand="WIN";SUPERLOAD.getSound("win").play();SUPERLOAD.getSound("bae").play();SUPERLOAD.getSound("bae2").play();FKR.win.visible=true;FKR.score+=100}if(FKR.tilstand==="WIN"){this.speedX=0;this.parameterSpeed=0;this.posX=11800;this.spriteIndex=0;t=false}if(t){if(this.polyLineGameObject){var n=Math.floor(this.posX*.2)%10;if(n<3){this.spriteIndex=2}else if(n<5){this.spriteIndex=3}else if(n<8){this.spriteIndex=4}else{this.spriteIndex=5}}else{this.spriteIndex=1}if(this.posY>125){this.spriteIndex=6}}};FKR.protagonist.hit=function(){if(this.polyLineGameObject){SUPERLOAD.getSound("busk").play();this.polyLineGameObject=null;this.posY+=1;this.speedY=0}};FKR.protagonist.customEnterPolyLineGameObject=function(){if(this.posX>100){SUPERLOAD.getSound("lande").play()}if(this.readyForChange){if(Math.random()<.5){SUPERLOAD.getSound("bae").play()}else{SUPERLOAD.getSound("bae2").play()}this.readyForChange=false;FKR.newLeader()}this.spriteIndex=2};FUNGRID.addGameObject(FKR.protagonist,"game");FKR.sauer=[];FKR.lagSau(1,true);FKR.lagSau(12);FKR.lagSau(26);FKR.lagSau(42);FKR.bjellesau=FKR.sauer[0];FKR.meny=FUNGRID.GameObject("meny",SUPERLOAD.getGraphic("sprites"),40,-95,1,1);FKR.meny.addSprite("meny",0,454,423,201);FUNGRID.addGameObject(FKR.meny,"game");FKR.ow=FUNGRID.GameObject("orientationWarning",SUPERLOAD.getGraphic("sprites"),50,50,0,0);FKR.ow.addSprite("orientationWarning",133,657,162,102);FUNGRID.addGameObject(FKR.ow,"ow");FKR.win=FUNGRID.GameObject("win",SUPERLOAD.getGraphic("sprites"),200,70,0,0);FKR.win.addSprite("win",0,657,133,67);FUNGRID.addGameObject(FKR.win,"game");FKR.win.visible=false;FKR.stbg=FUNGRID.GameObject("stbg",SUPERLOAD.getGraphic("sprites"),440,5,0,0);FKR.stbg.addSprite("stbg",395,404,37,37);FUNGRID.addGameObject(FKR.stbg,"game");FUNTOUCH.init("canvas",FKR.s);FUNTOUCH.setCursorStyle("pointer");FUNTOUCH.customDown=FKR.touchDown;FUNTOUCH.customUp=FKR.touchUp;FUNKEYS.initArrowsAndSpace();FUNKEYS.customUpDown=FKR.keypressUp;window.scrollTo(0,1);FUNGRID.setFutureViewport(FKR.protagonist.posX-FUNGRID.width(),FKR.protagonist.posY-FUNGRID.height()*.9);FUNGRID.moveViewport(FKR.meny.posX-40,FKR.meny.posY-10);FKR.viewOffX=FUNGRID.width()*.2;FKR.viewOffY=FUNGRID.height()*.65;FKR.resetTilMeny();FUNGRID.update("game");FKR.timerId=setInterval(FKR.update,25)};FKR.newLeader=function(){if(FKR.bjellesau.hyrde){var e=Math.floor(Math.random()*FKR.sauer.length);while(e===FKR.bjellesau.i){e=Math.floor(Math.random()*FKR.sauer.length)}FKR.sauer[e].futureDelay=1}else{FKR.hyrde.futureDelay=1}};FKR.changeOver=function(e,t){if(e===1){FKR.bjellesau.futureDelay=FKR.sauer[t].oldDelay;FKR.bjellesau=FKR.sauer[t]}else{FKR.sauer[t].oldDelay=FKR.sauer[t].delay}};FKR.lagStjerne=function(e,t,n){var r=FUNGRID.GameObject("stjerne",SUPERLOAD.getGraphic("sprites"),e,t,1,1,FUNGRID.RepeatSettings(n));r.addSprite("stjerne",218,345,26,26,-13,-13);r.customOnRepeat=function(){this.visible=true};r.customBeforeUpdateCanvasPosition=function(){if(this.visible){if(FKR.protagonist.posX>this.posX-10&&FKR.protagonist.posX<this.posX+10&&FKR.protagonist.posY>this.posY-10&&FKR.protagonist.posY<this.posY+25){this.visible=false;FKR.score+=1;SUPERLOAD.getSound("star").play();FKR.protagonist.readyForChange=true}}};FUNGRID.addGameObject(r,"game")};FKR.lagSau=function(e,t){var n=FUNGRID.GameObject("sau"+FKR.sauer.length,SUPERLOAD.getGraphic("sprites"),100,100,1,1);if(t){n.addSprite("ro",0,360,16,33,-6,-30);n.addSprite("jump",27,361,24,29,-12,-29);n.addSprite("w1",65,360,23,32,-8,-31);n.addSprite("w2",100,362,21,30,-5,-29);n.addSprite("w3",121,362,30,30,-20,-29);n.addSprite("w4",166,362,20,30,-7,-29);n.addSprite("die",193,360,25,30,-12,-30);n.hyrde=true;FKR.hyrde=n}else{n.addSprite("ro",117,346,16,13,-8,-11);n.addSprite("jump",92,345,19,12,-9,-18);n.addSprite("w1",0,345,15,14,-7,-12);n.addSprite("w2",23,345,16,14,-7,-12);n.addSprite("w3",47,345,15,14,-7,-12);n.addSprite("w4",70,345,16,14,-7,-12);n.addSprite("die",92,345,19,12,-9,-18);n.hyrde=false}n.track=[];n.i=FKR.sauer.length;n.delay=e;n.oldDelay=e;n.changing=false;n.futureDelay=e;n.customBeforeUpdateCanvasPosition=function(e){if(FKR.tilstand==="MENY"){this.track.push({x:FKR.protagonist.posX-this.delay*.5,y:FKR.protagonist.posY,i:FKR.protagonist.spriteIndex})}else{this.track.push({x:FKR.protagonist.posX,y:FKR.protagonist.posY,i:FKR.protagonist.spriteIndex})}if(this.delay<this.futureDelay){this.delay+=1;if(this.delay<this.futureDelay-15){this.delay+=1}this.changing=true}else if(this.delay>this.futureDelay){this.delay-=1;if(this.delay>this.futureDelay+15){this.delay-=1}this.changing=true}else if(this.changing){FKR.changeOver(this.delay,this.i);this.changing=false}while(this.track.length>this.delay){this.track.shift()}this.posX=this.track[0].x;this.posY=this.track[0].y;this.spriteIndex=Math.min(this.track[0].i,this.sprites.length-1)};FUNGRID.addGameObject(n,"game");FKR.sauer.push(n)};FKR.touchDown=function(){FKR.protagonist.hopp()};FKR.keypresRight=function(){};FKR.keypressLeft=function(){};FKR.keypressUp=function(){FKR.protagonist.hopp()};FKR.keypresDown=function(){};FKR.touchUp=function(){};FKR.resetTilMeny=function(){FUNTOUCH.preventDefault=false;FUNKEYS.preventDefault=false;FKR.score=0;FKR.protagonist.polyLineGameObject=null;FKR.protagonist.posY=96;FKR.protagonist.posX=-12;FKR.protagonist.speedY=-1;FKR.protagonist.speedX=3;FKR.protagonist.accelerationY=.5;FKR.protagonist.parameterSpeed=3;FKR.tilstand="MENY";FKR.meny.visible=true;FUNGRID.viewportSettings(null,null,null,null)};FKR.update=function(){if(FKR.protagonist){if(FKR.protagonist.posY>1e3){if(FKR.tilstand==="GAME"){SUPERLOAD.getSound("die").play()}FKR.resetTilMeny()}if(FKR.tilstand==="MENY"){FUNGRID.setFutureViewport(FKR.meny.posX-40,FKR.meny.posY-10)}else{FUNGRID.setFutureViewport(FKR.protagonist.posX-FKR.viewOffX,FKR.protagonist.posY-FKR.viewOffY)}if(FKR.orientationWarning){var e=FKR.meny.visible;FKR.meny.visible=false;FUNGRID.update("game");FKR.meny.visible=e;FUNGRID.update("ow")}else{FUNGRID.update("game")}FUNGRID.getContext().textAlign="center";FUNGRID.getContext().fillStyle="#FFFF66";FUNGRID.getContext().font=12*FKR.s+"px Arial";FUNGRID.getContext().fillText(FKR.score,458.5*FKR.s,29*FKR.s);if(FKR.score>FKR.rekord){FKR.rekord=FKR.score;if(typeof Storage!=="undefined"){localStorage.FKrekord1=JSON.stringify(FKR.rekord)}}FUNGRID.getContext().fillStyle="rgba(255,255,255,0.2)";FUNGRID.getContext().font=12*FKR.s+"px Arial";FUNGRID.getContext().fillText(FKR.rekord,430*FKR.s,29*FKR.s)}}
